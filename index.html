<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css?v=2.0.0">
    <link rel="stylesheet" href="./css/index1.css?v=1.0.0">
    <link rel="stylesheet" href="./css/music/iconfont.css">

</head>
<body>
    <!-- 粒子动效库 -->
    <div id="particles-js" ></div>
    <script src="js/particles.js-master/particles.js"></script>
    <script src="js/particles.js-master/app.js"></script>


    <!-- 导航栏 -->
    <div id="Navigation-bar">
        <ul class="ul1">
            <li><a href="./index.html" class="a1" id="index">主页</a></li>
            <li><a href="./hobby.html" class="a1" id="hobby">兴趣爱好</a></li>
            <li><a href="./knowledge.html" class="a1" id="knowledge">学习总结</a></li>
            <li><a href="./Project-Experience.html" class="a1" id="Project-Experience">项目经历</a></li>
            <li><a href="./Important-documents.html" class="a1" id="Important-documents">工作文件</a></li>
        </ul>
    </div>

    <!--展栏1 -->
    <div id="exhibit1">
        <div id="music">
            <audio src="" id="myaudio"></audio>
            <div id="music-info">
                <div id="music-img">
                    <img src="./image/music-img/下雨天-南拳妈妈.jpg" alt="下雨天-南拳妈妈" width="100%" height="100%">
                </div>
                <div class="music-text" id="music-text" style="display: block;">
                    <div id="textpart">
                        <div id="music-title">
                            <h1>下雨天</h1>
                        </div>
                        <div id="music-author">
                            <p>南拳妈妈</p>
                        </div>
                        <div id="music-lyrics">
                            <p>下雨天了怎么办我好想你</p>
                        </div>
                    </div>
                    <div id="music-progress">
                        <div id="music-progress-time">
                            <span id="starttime">00:00</span>
                            <span id="endtime">05:39</span>
                        </div>
                        <div id="music-progress-bar">
                            <div id="music-progress-line"></div>
                        </div>
                    </div>
                </div>
                <div class="music-list" id="music-list" style="display: none;">
                    <div id="music-list-top">
                        <div id="music-list-title">歌曲列表</div>
                        <div id="music-list-back"></div>
                    </div>
                    <div id="music-list-form">
                        <ul id="music-list-content" >
                            <li>
                                <span>01. 下雨天 - 南拳妈妈</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="music-panel">
                <span class="iconfont icon-shangyishouge" id="icon-shangyishouge" style="margin-right: 2%;" ></span>
                <span class="iconfont icon-bofang" id="icon-bofang" style="margin-right: 2%;"></span>
                <span class="iconfont icon-xiayishou" id="icon-xiayishou" style="margin-right: 10%;" ></span>
                <span class="iconfont icon-guanbishengyin" id="icon-guanbishengyin"  style="margin-right: 5%;" ></span>
                <span class="iconfont icon-gedan" id="icon-gedan"  ></span>
            </div>
        </div>
        <div id="photo"></div>
    </div>

    <!-- 展栏2 -->
    <div id="exhibit2">
        <div class="exhibit2" id="hobby">hobby</div>
        <div class="exhibit2" id="knowledge">knowledge</div>
        <div class="exhibit2" id="Project-Experience">Project-Experience</div>
        <div class="exhibit2" id="Important-documents">Important-documents</div>
        <div class="exhibit2"></div>
    </div>


    <!-- 不同设备盒子、字体比例问题 -->
    <script type="text/javascript">
        var phoneWidth =  parseInt(window.screen.width);
        var phoneScale = phoneWidth/640;
        var ua = navigator.userAgent;
        if (/Android (\d+\.\d+)/.test(ua)){
            var version = parseFloat(RegExp.$1);
            if(version>2.3){
                document.write('<meta name="viewport" content="width=640, minimum-scale = '+phoneScale+', maximum-scale = '+phoneScale+', target-densitydpi=device-dpi">');
            }else{
                document.write('<meta name="viewport" content="width=640, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi">');
        }
    </script>
    <!-- 音乐面板功能 -->
    <script type="text/javascript" src="./js/music-contro.js"></script>

    <!-- 加载音乐列表信息 -->
    <script type="text/javascript" src="./js/jquery/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="./music.json"></script>
    <script>
        // 空列表等待传入
        var musiclist = []
        // 当前音乐
        var initmusic = 0
        $.ajax({
            type: "GET",
            url: "./music.json",
            dataType: "json",
            success: function(data){
                musiclist = data
                render(data[initmusic]);
            },
        })
        // 设置标签对应的内容 对号入座
        function render(data){
            $("#music-title").html(data.name)
            $("#music-author").html(data.singer)
            $("#endtime").html(data.time)
            $('#music-img img').attr('src',data.img)
            $('audio').attr('src',data.url)
        }
        // 给播放按钮绑定点击事件
        $('#icon-bofang').on("click",function(){
            //修改播放暂停图标
            if ($(this).hasClass("icon-bofang")) {
                // 播放音乐
                $("audio").get(0).play()
                console.log(Boolean($("audio").get(0).currentTime));
                $(this).removeClass().addClass('iconfont icon-huanchong')
                var timesRun = 0;
                var interval =setInterval(function(){
                    timesRun+=1
                    if(timesRun === 15){    
                        clearInterval(interval);    
                    }
                    console.log(timesRun);
                    if (Boolean($("audio").get(0).currentTime)) {
                        clearInterval(interval);
                    }
                    console.log($("audio").get(0).currentTime);
                    console.log(Boolean($("audio").get(0).currentTime));
                }, 1000);
                $(this).removeClass().addClass('iconfont icon-zanting')
            }else{
                $(this).removeClass().addClass('iconfont icon-bofang')
                // 暂停音乐
                $("audio").get(0).pause()
            }
        })
        
        
        // 给歌单按钮绑定点击事件
        $(".icon-gedan").on("click",function(){
            if($('.music-text').attr('style') == 'display: block;'){
                $('.music-text').attr('style','display: none;') 
                $('.music-list').attr('style','display: block;')
            }else{
                $('.music-text').attr('style','display: block;') 
                $('.music-list').attr('style','display: none;') 
            }
        })
        
        

    </script>
</body>
</html>